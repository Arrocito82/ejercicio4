function validarExt(){var e=document.getElementsByName("uploadedFile")[0],t=e.value,a=/(.mp3|.MP3)$/i;if(!a.exec(t))return alert("Asegurese de haber seleccionado un audio mp3"),e.value="",!1}function agregarAutor(e){var t=e.currentTarget.parentElement.parentElement.parentElement.querySelectorAll("select")[0],a=t.value;if(autoresids.includes(a))return 0;var r=t.selectedOptions[0].text;autoresids.push(a),introducirElemento(tablaAutores,r,"autoresids")}function agregarCategoria(e){var t=e.currentTarget.parentElement.parentElement.parentElement.querySelectorAll("select")[0],a=t.value;if(categoriasids.includes(a))return 0;var r=t.selectedOptions[0].text;categoriasids.push(a),introducirElemento(tablaCategorias,r,"categoriasids")}function agregarGenero(e){var t=e.currentTarget.parentElement.parentElement.parentElement.querySelectorAll("select")[0],a=t.value;if(generosids.includes(a))return 0;var r=t.selectedOptions[0].text;generosids.push(a),introducirElemento(tablaGenero,r,"generosids")}function newACG(e){newACGtipo=e;const t=e.charAt(0).toUpperCase()+e.slice(1);document.getElementById("mtCrear").innerHTML="Crear Nuevo "+t,document.getElementById("mbCrear").innerHTML="Ingresa el nombre del nuevo "+t,$("#modalCrear").modal("toggle")}function send(){var e="",t=newACGtipo;if(e=document.getElementById("inputCrear").value,""==e)return alert("ingresa un nombre para el nuevo"+newACGtipo),0;$("#modalCrear").modal("hide");var a={nombre:e,tipo:t},r="/new.php";$.ajax({type:"GET",url:r,contentType:"application/json",data:{datos:JSON.stringify(a)},async:!0,dataType:"text",success:function(a){console.log(a),"autor"==t&&(autoresids.push(a),introducirElemento(tablaAutores,e,"autoresids")),"categoria"==t&&(categoriasids.push(a),introducirElemento(tablaCategorias,e,"categoriasids")),"genero"==t&&(generosids.push(a),introducirElemento(tablaGenero,e,"generosids"))}})}function removeItemFromArray(e,t){return t>-1&&e.splice(t,1),e}function introducirElemento(e,t,a){var r=e.tBodies[0].insertRow(-1),n=r.insertCell(0);n.scope="row",t.length>12&&(t=t.substr(0,9)+".."),n.innerHTML=t+"<i class='icono-close ml-5 fas fa-times' onclick='deleteRow(event,"+a+")'></i>"}function deleteRow(e,t){var a=e.currentTarget.parentElement.parentElement,r=a.parentElement.parentElement,n=a.rowIndex-1;console.log(n);var o=removeItemFromArray(t,n);console.log(o),t=[],t=o,r.deleteRow(a.rowIndex)}function enviarDatos(){var e=document.getElementsByName("uploadedFile")[0],t="uploadtest.php";autoresids.length<1&&autoresids.push("5fdbe0b0eed2993143d84081"),categoriasids.length<1&&categoriasids.push("5ff6407e64eb6c5ec1114b72"),generosids.length<1&&generosids.push("5ff6408be3b08060717b7342");var a={autoresids:autoresids,categoriasids:categoriasids,generosids:generosids,md5:document.getElementById("md5").value,ext:e.value.substr(e.value.lastIndexOf(".")),titulo:document.getElementById("titulo").value};""!=e.value?$.ajax({type:"GET",url:t,contentType:"application/json",data:{datos:JSON.stringify(a)},async:!0,dataType:"text",success:function(e){console.log(e)}}):alert("Asegurese de haber aÃ±adir audio")}let newACGtipo="",tablaAutores=document.getElementById("tablaAutores"),tablaCategorias=document.getElementById("tablaCategorias"),tablaGenero=document.getElementById("tablaGeneros");var autoresids=[],categoriasids=[],generosids=[];let modalCrear=document.getElementById("modalCrear");$(".custom-file-input").on("change",function(){var e=$(this).val().split("\\").pop();$(this).siblings(".custom-file-label").addClass("selected").html(e)});